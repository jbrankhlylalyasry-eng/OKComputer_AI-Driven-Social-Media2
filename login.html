<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - NeuroConnect</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700;800;900&family=Cairo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Core Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    
    <!-- Custom Styles -->
    <style>
        :root {
            --primary-purple: #6B46C1;
            --primary-blue: #3B82F6;
            --glass-white: rgba(255, 255, 255, 0.1);
            --blur-amount: 20px;
            --transition-speed: 0.3s;
        }
        
        body {
            font-family: 'Rubik', sans-serif;
            background: linear-gradient(135deg, #0F172A 0%, #1E293B 50%, #334155 100%);
            background-attachment: fixed;
            min-height: 100vh;
        }
        
        body.rtl {
            font-family: 'Cairo', sans-serif;
        }
        
        .glass-effect {
            background: var(--glass-white);
            backdrop-filter: blur(var(--blur-amount));
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-blue));
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition-speed) ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #6B46C1, #3B82F6);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(107, 70, 193, 0.4);
        }
        
        .form-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary-purple);
            box-shadow: 0 0 0 3px rgba(107, 70, 193, 0.1);
        }
        
        .form-input.error {
            border-color: #EF4444;
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }
        
        .social-login-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .social-login-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
        
        .security-indicator {
            background: linear-gradient(90deg, #EF4444, #F59E0B, #10B981);
            height: 4px;
            border-radius: 2px;
            transition: width 0.3s ease;
        }
        
        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }
        
        .shape {
            position: absolute;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }
        
        .shape:nth-child(1) { top: 20%; left: 10%; animation-delay: 0s; }
        .shape:nth-child(2) { top: 60%; left: 80%; animation-delay: 2s; }
        .shape:nth-child(3) { top: 80%; left: 20%; animation-delay: 4s; }
        .shape:nth-child(4) { top: 30%; left: 70%; animation-delay: 1s; }
        .shape:nth-child(5) { top: 70%; left: 50%; animation-delay: 3s; }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .login-card {
            animation: slideIn 0.8s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .ai-eye {
            position: relative;
            overflow: hidden;
        }
        
        .ai-eye::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(107, 70, 193, 0.3) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: aiScan 3s ease-in-out infinite;
        }
        
        @keyframes aiScan {
            0%, 100% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        
        .password-strength {
            display: flex;
            height: 4px;
            border-radius: 2px;
            overflow: hidden;
            margin-top: 8px;
        }
        
        .strength-segment {
            flex: 1;
            background: #374151;
            margin: 0 1px;
            transition: all 0.3s ease;
        }
        
        .strength-segment.weak { background: #EF4444; }
        .strength-segment.medium { background: #F59E0B; }
        .strength-segment.strong { background: #10B981; }
    </style>
</head>
<body class="text-white">
    <!-- Floating Background Shapes -->
    <div class="floating-shapes">
        <div class="shape w-20 h-20 bg-purple-500 rounded-full"></div>
        <div class="shape w-16 h-16 bg-blue-500 rounded-lg"></div>
        <div class="shape w-24 h-24 bg-indigo-500 rounded-full"></div>
        <div class="shape w-12 h-12 bg-cyan-500 rounded-lg"></div>
        <div class="shape w-18 h-18 bg-pink-500 rounded-full"></div>
    </div>
    
    <!-- Navigation -->
    <nav class="glass-effect fixed top-0 left-0 right-0 z-50 px-6 py-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <!-- Logo -->
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 gradient-bg rounded-lg flex items-center justify-center">
                    <span class="text-white font-bold text-lg">N</span>
                </div>
                <h1 class="text-xl font-bold gradient-text">NeuroConnect</h1>
            </div>
            
            <!-- Right Side Actions -->
            <div class="flex items-center space-x-4">
                <button id="languageToggle" class="glass-effect px-3 py-2 rounded-lg hover:bg-white/20 transition-colors">
                    <span class="text-sm font-medium">EN/AR</span>
                </button>
                <a href="register.html" class="glass-effect px-4 py-2 rounded-lg hover:bg-white/20 transition-colors" data-translate="register">Register</a>
            </div>
        </div>
    </nav>
    
    <!-- Main Login Container -->
    <main class="min-h-screen flex items-center justify-center pt-24 pb-12 px-6">
        <div class="max-w-md w-full">
            <!-- Login Card -->
            <div class="login-card glass-card rounded-2xl p-8">
                <!-- Header -->
                <div class="text-center mb-8">
                    <div class="ai-eye w-20 h-20 gradient-bg rounded-full flex items-center justify-center mx-auto mb-4">
                        <img src="resources/ai-assistant.png" alt="AI" class="w-12 h-12">
                    </div>
                    <h2 class="text-3xl font-bold gradient-text mb-2" data-translate="welcomeBack">Welcome Back</h2>
                    <p class="text-gray-300" data-translate="loginToContinue">Login to continue your AI-powered journey</p>
                </div>
                
                <!-- Social Login Options -->
                <div class="space-y-3 mb-6">
                    <button class="social-login-btn w-full py-3 px-4 rounded-lg flex items-center justify-center space-x-3" onclick="socialLogin('google')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTkuMDAwMDIgMy45MTQ4QzEwLjcwNDggMy45MTQ4IDExLjkyMDIgNC44ODM4MyAxMi41NTI4IDUuNjM2MDVMMTUuMjY2MyAzLjAwMDAyQzEzLjY3NjEgMS4zMzMzNCAxMS41MTA1IDAuMzMzMzM0IDkuMDAwMDIgMC4zMzMzMzRDNC4wMjI1MiAwLjMzMzMzNCAwLjMzMzM0NCAzLjcyNTgzIDAuMzMzMzQ0IDguNDk5ODRDMC4zMzMzNDQgMTAuMDE2NSAwLjc0MTY3NyAxMS40NTgxIDEuNDc1ODQgMTIuNjY2NUw0LjQyNSA5LjgzMzE3QzQuMTQxNjcgOS4wODMxNyA0LjAwMDAyIDguMzMzMTcgNC4wMDAwMiA3LjQ5OTg0QzQuMDAwMDIgNS41ODMxNyA1LjU4MzM0IDMuOTE0OCA5LjAwMDAyIDMuOTE0OFoiIGZpbGw9IiM0Mjg1RjQiLz4KPHBhdGggZD0iTTE3Ljk5OTggOC40OTk4QzE3Ljk5OTggNy45MTY1IDE3Ljk1ODIgNy4zMzMxIDE3Ljg3NDggNi43NjY0NEgxNy45OTk4VjUuODMzMTFDMTcuOTk5OCA1LjI0OTc4IDE3Ljg5MTUgNC42ODMwNSAxNy43MDgyIDQuMTY2NDRIMTMuODMzM0MxMy45MTY2IDQuNTgzMTEgMTMuOTk5OCA1LjA4MzExIDEzLjk5OTggNS41ODMxMUMxMy45OTk4IDYuNzY2NDQgMTMuNjY2NSA3Ljg5OTc4IDEzLjA4MzIgOC44MzMxMUwxMy4wMDAyIDguOTk5NzhMMTYuMDgzMiAxMS42NjY0QzE2LjM3NDggMTEuMjQ5OCAxNi42NjY1IDEwLjc5MTQgMTYuOTE2NSAxMC4zMzMxQzE3LjU4MzIgOS4yNDk3OCAxNy45OTk4IDguMDgzMTEgMTcuOTk5OCA4LjQ5OThaIiBmaWxsPSIjMzRBODUzIi8+CjxwYXRoIGQ9Ik05LjAwMDAzIDE3LjY2NjVDMTEuNTEwNSAxNy42NjY1IDEzLjY3NjEgMTYuNjY2NSAxNS4yNjYzIDE1TDEyLjI2NjMgMTIuMzMzM0MxMS45MTYzIDEyLjU4MzMgMTEuNDk4OCAxMi43OTE2IDExLjA4MzMgMTIuOTk5OEMxMC4xNjY1IDEzLjQ5OTggOS4xNjY2NyAxMy45OTk4IDkuMDAwMDMgMTMuOTk5OEM4LjgzMzM0IDEzLjk5OTggNy44MzMzNCAxMy40OTk4IDYuOTE2NjcgMTIuOTk5OEM2LjUwMTI1IDEyLjc5MTYgNi4wODM3NiAxMi41ODMzIDUuNzUwMDMgMTIuMzMzM0wyLjc1MDAzIDE1QzQuMzQwMjUgMTYuNjY2NSA2LjQ4OTU5IDE3LjY2NjUgOS4wMDAwMyAxNy42NjY1WiIgZmlsbD0iI0ZCQkMwNSIvPgo8cGF0aCBkPSJNNS43NSA5LjgzMzE3TDQuNDI1IDEyLjY2NjVDNC43NSAxMy4wODMzIDUuMTY2NjcgMTMuNDk5OCA1Ljc1IDEzLjk5OThDNi4zMzMzNCAxNC41ODMxIDYuOTE2NjcgMTUuMTY2NSA3LjQxNjY3IDE1LjU4MzFMMTEuMDgzMyAxMi45OTk4QzEwLjE2NjcgMTIuNDk5OCA5LjE2NjY3IDExLjk5OTggOS4wMDAwMyAxMS45OTk4QzguODMzMzQgMTEuOTk5OCA3LjgzMzM0IDEyLjQ5OTggNi45MTY2NyAxMi45OTk4TDUuNzUgOS44MzMxN1oiIGZpbGw9IiNFNzQxMzMiLz4KPC9zdmc+Cg==" alt="Google" class="w-5 h-5">
                        <span data-translate="continueWithGoogle">Continue with Google</span>
                    </button>
                    
                    <button class="social-login-btn w-full py-3 px-4 rounded-lg flex items-center justify-center space-x-3" onclick="socialLogin('apple')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyLjI1MDIgMy4yNjg4QzExLjUwODggMi43OTMyIDEwLjU3MDIgMi40OTM4IDkuNzUwMTggMi40OTM4QzguOTMwMTggMi40OTM4IDguMTkxODUgMi43OTMyIDcuNDUwMTggMy4yNjg4QzYuNzA4NTEgMy43NDQ1IDYuMTY2ODUgNC40Mjk1IDUuODI1MTggNS4yMjM4QzUuNDgzNTEgNi4wMTgxIDUuNDE2ODUgNi45MzggNS42MjUxOCA3LjgxMzhsMS4xMjUxOCA0LjVjMC4yMDg1MSAwLjg3NTggMC41ODMzNCAxLjY4MzcgMS4xMjUxOCAyLjM2ODhjMC41NDE4NCAwLjY4NTEgMS4yNTg1IDEuMjM1NSAyLjEyNTE4IDEuNjI1MWMwLjg2Njc5IDAuMzg5NiAxLjg3NTIgMC42MTQ2IDIuODc1MTggMC42MTQ2YzEuMDAwMiAwIDEuOTk5OC0wLjIyNSAyLjg3NTE4LTAuNjE0NmMwLjg3NTItMC4zODk2IDEuNTgzNS0wLjk0IDJLjEyNTE4LTEuNjI1MWMwLjU0MTgtMC42ODUxIDAuOTE2Ni0xLjQ5MyAxLjEyNTE4LTIuMzY4OGwxLjEyNTE4LTQuNWMwLjIwODUxLTAuODc1OCAwLjE0MTg1LTEuNzk1Ny0wLjIwMDE4LTIuNTkwMUMxNS45MTY4IDQuNDI5NSAxNS4zNzUyIDMuNzQ0NSAxNC42MjUyIDMuMjY4OEwxMy44NzUyIDQuMDYzOEwxMy4xMjUyIDQuODU4OEwxMi4yNTAyIDMuMjY4OFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMC4xMjUyIDcuNDkzOUMxMC4xMjUyIDYuNTU4NiA5LjM2Njg1IDUuNzk5OSA4LjQzNzUyIDUuNzk5OUM3LjUwODE4IDUuNzk5OSA2Ljc0OTg0IDYuNTU4NiA2Ljc0OTg0IDcuNDkzOUM2Ljc0OTg0IDguNDI5MiA3LjUwODE4IDkuMTg3OCA4LjQzNzUyIDkuMTg3OEM5LjM2Njg1IDkuMTg3OCAxMC4xMjUyIDguNDI5MiAxMC4xMjUyIDcuNDkzOVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=" alt="Apple" class="w-5 h-5">
                        <span data-translate="continueWithApple">Continue with Apple</span>
                    </button>
                </div>
                
                <!-- Divider -->
                <div class="flex items-center mb-6">
                    <div class="flex-1 h-px bg-white/20"></div>
                    <span class="px-4 text-sm text-gray-400" data-translate="orContinueWithEmail">or continue with email</span>
                    <div class="flex-1 h-px bg-white/20"></div>
                </div>
                
                <!-- Login Form -->
                <form id="loginForm" class="space-y-6">
                    <!-- Email Input -->
                    <div>
                        <label for="email" class="block text-sm font-medium mb-2" data-translate="email">Email Address</label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email"
                            class="form-input w-full px-4 py-3 rounded-lg text-white placeholder-gray-400 focus:outline-none"
                            placeholder="your@email.com"
                            required
                        >
                        <div id="emailError" class="text-red-400 text-sm mt-1 hidden"></div>
                    </div>
                    
                    <!-- Password Input -->
                    <div>
                        <div class="flex items-center justify-between mb-2">
                            <label for="password" class="block text-sm font-medium" data-translate="password">Password</label>
                            <a href="#" class="text-sm text-purple-400 hover:text-purple-300" data-translate="forgotPassword">Forgot password?</a>
                        </div>
                        <div class="relative">
                            <input 
                                type="password" 
                                id="password" 
                                name="password"
                                class="form-input w-full px-4 py-3 rounded-lg text-white placeholder-gray-400 focus:outline-none pr-12"
                                placeholder="Enter your password"
                                required
                            >
                            <button 
                                type="button" 
                                id="togglePassword"
                                class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white"
                            >
                                👁️
                            </button>
                        </div>
                        <div id="passwordError" class="text-red-400 text-sm mt-1 hidden"></div>
                        
                        <!-- Password Strength Indicator -->
                        <div id="passwordStrength" class="password-strength hidden">
                            <div class="strength-segment"></div>
                            <div class="strength-segment"></div>
                            <div class="strength-segment"></div>
                            <div class="strength-segment"></div>
                        </div>
                        <div id="strengthText" class="text-xs mt-1 hidden"></div>
                    </div>
                    
                    <!-- Remember Me & 2FA -->
                    <div class="flex items-center justify-between">
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox" class="sr-only peer" id="rememberMe">
                            <div class="w-5 h-5 bg-white/20 rounded border border-white/30 peer-checked:bg-purple-600 peer-checked:border-purple-600 transition-all duration-200 flex items-center justify-center">
                                <svg class="w-3 h-3 text-white hidden peer-checked:block" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                            <span class="ml-3 text-sm" data-translate="rememberMe">Remember me</span>
                        </label>
                        
                        <button type="button" id="enable2FA" class="text-sm text-blue-400 hover:text-blue-300 flex items-center space-x-1">
                            <span>🔐</span>
                            <span data-translate="enable2FA">Enable 2FA</span>
                        </button>
                    </div>
                    
                    <!-- AI Security Features -->
                    <div class="glass-effect p-4 rounded-lg">
                        <div class="flex items-center space-x-2 mb-3">
                            <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                            <span class="text-sm font-medium" data-translate="aiSecurityActive">AI Security Active</span>
                        </div>
                        <div class="space-y-2 text-xs text-gray-300">
                            <div class="flex items-center space-x-2">
                                <span class="text-green-400">✓</span>
                                <span data-translate="encryptedConnection">End-to-end encrypted connection</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-green-400">✓</span>
                                <span data-translate="aiThreatDetection">AI threat detection enabled</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-green-400">✓</span>
                                <span data-translate="anomalyMonitoring">Real-time anomaly monitoring</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Login Button -->
                    <button 
                        type="submit" 
                        id="loginBtn"
                        class="btn-primary w-full py-3 px-4 rounded-lg font-semibold text-lg transition-all duration-300"
                        data-translate="login"
                    >
                        Login
                    </button>
                </form>
                
                <!-- Sign Up Link -->
                <div class="text-center mt-6">
                    <p class="text-gray-400">
                        <span data-translate="dontHaveAccount">Don't have an account?</span>
                        <a href="register.html" class="text-purple-400 hover:text-purple-300 font-medium ml-1" data-translate="signUp">Sign up</a>
                    </p>
                </div>
                
                <!-- Language & Region -->
                <div class="mt-6 pt-6 border-t border-white/20">
                    <div class="flex items-center justify-between text-sm text-gray-400">
                        <div class="flex items-center space-x-2">
                            <span>🌐</span>
                            <span id="detectedLocation">Detected: English (US)</span>
                        </div>
                        <button class="text-purple-400 hover:text-purple-300" onclick="showLanguageSelector()">
                            Change
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 2FA Modal -->
            <div id="twoFAModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center">
                <div class="glass-card rounded-xl p-8 max-w-md w-full mx-4">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 gradient-bg rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-2xl">🔐</span>
                        </div>
                        <h3 class="text-xl font-bold gradient-text mb-2" data-translate="twoFactorAuthentication">Two-Factor Authentication</h3>
                        <p class="text-gray-300 text-sm" data-translate="enterVerificationCode">Enter the verification code sent to your device</p>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex justify-center space-x-2">
                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-xl bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:border-purple-500" data-index="0">
                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-xl bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:border-purple-500" data-index="1">
                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-xl bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:border-purple-500" data-index="2">
                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-xl bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:border-purple-500" data-index="3">
                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-xl bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:border-purple-500" data-index="4">
                            <input type="text" maxlength="1" class="w-12 h-12 text-center text-xl bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:border-purple-500" data-index="5">
                        </div>
                        
                        <div class="text-center">
                            <button class="text-sm text-purple-400 hover:text-purple-300" data-translate="resendCode">Resend code</button>
                        </div>
                        
                        <div class="flex space-x-3">
                            <button onclick="close2FAModal()" class="flex-1 glass-effect py-3 rounded-lg hover:bg-white/20 transition-colors" data-translate="cancel">Cancel</button>
                            <button onclick="verify2FA()" class="flex-1 btn-primary py-3 rounded-lg font-semibold" data-translate="verify">Verify</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="glass-effect py-6 px-6 mt-12">
        <div class="max-w-7xl mx-auto text-center">
            <p class="text-gray-400 text-sm">
                © 2024 NeuroConnect. Secured by advanced AI threat detection.
            </p>
        </div>
    </footer>
    
    <!-- Scripts -->
    <script src="main.js"></script>
    <script>
        let is2FAEnabled = false;
        let loginAttempts = 0;
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            setupFormHandlers();
            setupPasswordToggle();
            setup2FAHandlers();
            detectLocation();
            animateElements();
        });
        
        // Form handlers
        function setupFormHandlers() {
            const form = document.getElementById('loginForm');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            
            form.addEventListener('submit', handleLogin);
            emailInput.addEventListener('input', validateEmail);
            passwordInput.addEventListener('input', validatePassword);
            
            // Auto-focus first field
            emailInput.focus();
        }
        
        function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            // Validate inputs
            if (!validateEmail() || !validatePassword()) {
                return;
            }
            
            // Simulate login process
            const loginBtn = document.getElementById('loginBtn');
            const originalText = loginBtn.textContent;
            
            loginBtn.disabled = true;
            loginBtn.innerHTML = `
                <div class="flex items-center justify-center space-x-2">
                    <div class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                    <span>AI is verifying...</span>
                </div>
            `;
            
            // Simulate AI verification process
            setTimeout(() => {
                loginAttempts++;
                
                if (is2FAEnabled || loginAttempts >= 2) {
                    show2FAModal();
                } else {
                    // Successful login
                    if (rememberMe) {
                        localStorage.setItem('rememberedEmail', email);
                    }
                    
                    // Show success animation
                    loginBtn.innerHTML = `
                        <div class="flex items-center justify-center space-x-2">
                            <span>✓</span>
                            <span>Login successful!</span>
                        </div>
                    `;
                    
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 1500);
                }
                
                loginBtn.disabled = false;
            }, 2000);
        }
        
        // Email validation
        function validateEmail() {
            const emailInput = document.getElementById('email');
            const emailError = document.getElementById('emailError');
            const email = emailInput.value.trim();
            
            if (!email) {
                showFieldError(emailInput, emailError, 'Email is required');
                return false;
            }
            
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showFieldError(emailInput, emailError, 'Please enter a valid email address');
                return false;
            }
            
            clearFieldError(emailInput, emailError);
            return true;
        }
        
        // Password validation
        function validatePassword() {
            const passwordInput = document.getElementById('password');
            const passwordError = document.getElementById('passwordError');
            const password = passwordInput.value;
            
            if (!password) {
                showFieldError(passwordInput, passwordError, 'Password is required');
                updatePasswordStrength(0);
                return false;
            }
            
            if (password.length < 8) {
                showFieldError(passwordInput, passwordError, 'Password must be at least 8 characters');
                updatePasswordStrength(1);
                return false;
            }
            
            clearFieldError(passwordInput, passwordError);
            updatePasswordStrength(calculatePasswordStrength(password));
            return true;
        }
        
        // Password strength calculation
        function calculatePasswordStrength(password) {
            let strength = 0;
            
            if (password.length >= 8) strength += 1;
            if (password.length >= 12) strength += 1;
            if (/[a-z]/.test(password)) strength += 1;
            if (/[A-Z]/.test(password)) strength += 1;
            if (/[0-9]/.test(password)) strength += 1;
            if (/[^A-Za-z0-9]/.test(password)) strength += 1;
            
            return Math.min(strength, 4);
        }
        
        function updatePasswordStrength(strength) {
            const strengthContainer = document.getElementById('passwordStrength');
            const strengthText = document.getElementById('strengthText');
            const segments = strengthContainer.querySelectorAll('.strength-segment');
            
            strengthContainer.classList.remove('hidden');
            strengthText.classList.remove('hidden');
            
            segments.forEach((segment, index) => {
                segment.classList.remove('weak', 'medium', 'strong');
                if (index < strength) {
                    if (strength <= 1) {
                        segment.classList.add('weak');
                        strengthText.textContent = 'Weak';
                        strengthText.className = 'text-xs mt-1 text-red-400';
                    } else if (strength <= 3) {
                        segment.classList.add('medium');
                        strengthText.textContent = 'Medium';
                        strengthText.className = 'text-xs mt-1 text-yellow-400';
                    } else {
                        segment.classList.add('strong');
                        strengthText.textContent = 'Strong';
                        strengthText.className = 'text-xs mt-1 text-green-400';
                    }
                }
            });
        }
        
        // Field error handling
        function showFieldError(input, errorElement, message) {
            input.classList.add('error');
            errorElement.textContent = message;
            errorElement.classList.remove('hidden');
        }
        
        function clearFieldError(input, errorElement) {
            input.classList.remove('error');
            errorElement.classList.add('hidden');
        }
        
        // Password visibility toggle
        function setupPasswordToggle() {
            const toggleBtn = document.getElementById('togglePassword');
            const passwordInput = document.getElementById('password');
            
            toggleBtn.addEventListener('click', () => {
                const isPassword = passwordInput.type === 'password';
                passwordInput.type = isPassword ? 'text' : 'password';
                toggleBtn.textContent = isPassword ? '🙈' : '👁️';
                
                if (typeof anime !== 'undefined') {
                    anime({
                        targets: toggleBtn,
                        scale: [1, 1.2, 1],
                        duration: 300,
                        easing: 'easeOutBack'
                    });
                }
            });
        }
        
        // 2FA handlers
        function setup2FAHandlers() {
            const enable2FABtn = document.getElementById('enable2FA');
            const codeInputs = document.querySelectorAll('#twoFAModal input[data-index]');
            
            enable2FABtn.addEventListener('click', () => {
                is2FAEnabled = !is2FAEnabled;
                enable2FABtn.innerHTML = is2FAEnabled ? 
                    '<span>🔓</span><span>Disable 2FA</span>' : 
                    '<span>🔐</span><span>Enable 2FA</span>';
                
                if (is2FAEnabled) {
                    enable2FABtn.classList.add('text-green-400');
                    enable2FABtn.classList.remove('text-blue-400');
                } else {
                    enable2FABtn.classList.remove('text-green-400');
                    enable2FABtn.classList.add('text-blue-400');
                }
            });
            
            // Code input handling
            codeInputs.forEach((input, index) => {
                input.addEventListener('input', (e) => {
                    const value = e.target.value;
                    if (value && index < codeInputs.length - 1) {
                        codeInputs[index + 1].focus();
                    }
                });
                
                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Backspace' && !e.target.value && index > 0) {
                        codeInputs[index - 1].focus();
                    }
                });
            });
        }
        
        function show2FAModal() {
            document.getElementById('twoFAModal').classList.remove('hidden');
            document.querySelector('#twoFAModal input[data-index="0"]').focus();
            
            if (typeof anime !== 'undefined') {
                anime({
                    targets: '#twoFAModal .glass-card',
                    scale: [0.8, 1],
                    opacity: [0, 1],
                    duration: 400,
                    easing: 'easeOutBack'
                });
            }
        }
        
        function close2FAModal() {
            document.getElementById('twoFAModal').classList.add('hidden');
            // Reset code inputs
            document.querySelectorAll('#twoFAModal input[data-index]').forEach(input => {
                input.value = '';
            });
        }
        
        function verify2FA() {
            const codeInputs = document.querySelectorAll('#twoFAModal input[data-index]');
            const code = Array.from(codeInputs).map(input => input.value).join('');
            
            if (code.length === 6) {
                // Simulate 2FA verification
                const verifyBtn = document.querySelector('#twoFAModal button[onclick="verify2FA()"]');
                verifyBtn.innerHTML = `
                    <div class="flex items-center justify-center space-x-2">
                        <div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                        <span>Verifying...</span>
                    </div>
                `;
                verifyBtn.disabled = true;
                
                setTimeout(() => {
                    close2FAModal();
                    window.location.href = 'index.html';
                }, 1500);
            } else {
                // Show error
                codeInputs.forEach(input => {
                    input.classList.add('border-red-500');
                });
                
                setTimeout(() => {
                    codeInputs.forEach(input => {
                        input.classList.remove('border-red-500');
                    });
                }, 2000);
            }
        }
        
        // Social login
        function socialLogin(provider) {
            const btn = event.target.closest('button');
            const originalContent = btn.innerHTML;
            
            btn.disabled = true;
            btn.innerHTML = `
                <div class="flex items-center justify-center space-x-2">
                    <div class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                    <span>Connecting...</span>
                </div>
            `;
            
            setTimeout(() => {
                // Simulate social login
                window.location.href = 'index.html';
            }, 2000);
        }
        
        // Location detection
        function detectLocation() {
            // Simulate location detection
            const locations = [
                'English (US)',
                'English (UK)',
                'العربية (السعودية)',
                'Français (France)',
                'Deutsch (Deutschland)'
            ];
            
            const randomLocation = locations[Math.floor(Math.random() * locations.length)];
            document.getElementById('detectedLocation').textContent = `Detected: ${randomLocation}`;
        }
        
        function showLanguageSelector() {
            alert('Language selector would open here (This is a demo)');
        }
        
        // Animate elements on load
        function animateElements() {
            if (typeof anime !== 'undefined') {
                // Animate floating shapes
                anime({
                    targets: '.shape',
                    translateY: [0, -20, 0],
                    rotate: [0, 360],
                    duration: 6000,
                    loop: true,
                    easing: 'easeInOutSine',
                    delay: anime.stagger(1000)
                });
                
                // Animate login card
                anime({
                    targets: '.login-card',
                    opacity: [0, 1],
                    translateY: [50, 0],
                    duration: 800,
                    easing: 'easeOutQuart'
                });
            }
        }
        
        // Check for remembered email
        const rememberedEmail = localStorage.getItem('rememberedEmail');
        if (rememberedEmail) {
            document.getElementById('email').value = rememberedEmail;
            document.getElementById('rememberMe').checked = true;
        }
    </script>
</body>
</html>